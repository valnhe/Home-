---
import Layout from '../../layouts/Layout.astro'
import LogoWhite from "../../components/Icons/LogoWhite.astro";
import ExpandLeft from "../../components/Icons/ExpandLeft.astro";

const { id } = Astro.params;

const response = await fetch(`https://www.themealdb.com/api/json/v1/1/lookup.php?i=${id}`);
const data = await response.json();
const meal = data.meals[0];

const instructions = meal.strInstructions;
const paragraphs = instructions.split('\r\n');
---

<Layout title={meal.strMeal}>
    <nav>
        <LogoWhite/>
        <a href="/" class="bg-[#E5E7EB] text-[#0E1325] flex flex-row justify-center items-center gap-2 py-2 px-4 rounded-full">
            <ExpandLeft/>
            Back to categories
        </a>
    </nav>
    <main>
        <h1>{meal.strMeal}</h1>
        <h2>Ingredients</h2>

        <h2>Instructions</h2>
        {
            paragraphs.map((paragraph) => (
                <p>{paragraph}</p>
            ))
        }

    </main>
</Layout>

<style>

    h2 {
        font-family: 'Outfit Variable', sans-serif;
    }

    p {
        margin-bottom: 16px;
    }

    nav {
        max-width: 1136px;
        margin: 0 auto;
        display: flex;
        justify-content: space-between;
        margin-top: 32px;
        margin-bottom: 52px;
    }

    main {
        max-width: 616px;
        margin: 0 auto;
    }
</style>
